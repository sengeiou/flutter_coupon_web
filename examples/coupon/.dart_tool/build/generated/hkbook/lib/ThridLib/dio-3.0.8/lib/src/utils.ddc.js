define(['dart_sdk'], function(dart_sdk) {
  'use strict';
  const core = dart_sdk.core;
  const async = dart_sdk.async;
  const convert = dart_sdk.convert;
  const dart = dart_sdk.dart;
  const dartx = dart_sdk.dartx;
  const utils = Object.create(dart.library);
  const $length = dartx.length;
  const $_get = dartx._get;
  const $forEach = dartx.forEach;
  let VoidTovoid = () => (VoidTovoid = dart.constFn(dart.fnType(dart.void, [])))();
  let String__ToString = () => (String__ToString = dart.constFn(dart.fnType(core.String, [core.String], {encoding: convert.Encoding}, {})))();
  let dynamicTodynamic = () => (dynamicTodynamic = dart.constFn(dart.fnType(dart.dynamic, [dart.dynamic])))();
  let dynamicAnddynamicToNull = () => (dynamicAnddynamicToNull = dart.constFn(dart.fnType(core.Null, [dart.dynamic, dart.dynamic])))();
  let dynamicAndStringTovoid = () => (dynamicAndStringTovoid = dart.constFn(dart.fnType(dart.void, [dart.dynamic, core.String])))();
  const CT = Object.create(null);
  dart.defineLazy(CT, {
    get C0() {
      return C0 = dart.const({
        __proto__: convert.Latin1Codec.prototype,
        [Latin1Codec__allowInvalid]: false
      });
    },
    get C1() {
      return C1 = dart.fn(core.Uri.encodeQueryComponent, String__ToString());
    }
  });
  const Latin1Codec__allowInvalid = dart.privateName(convert, "Latin1Codec._allowInvalid");
  let C0;
  let C1;
  utils.isPlainAscii = function isPlainAscii(string) {
    return utils._ASCII_ONLY.hasMatch(string);
  };
  utils.writeStreamToSink = function writeStreamToSink(stream, sink) {
    let completer = async.Completer.new();
    stream.listen(dart.bind(sink, 'add'), {onError: dart.bind(sink, 'addError'), onDone: dart.fn(() => completer.complete(), VoidTovoid())});
    return completer.future;
  };
  utils.encodingForCharset = function encodingForCharset(charset, fallback) {
    let t0;
    if (fallback === void 0) fallback = C0 || CT.C0;
    if (charset == null) return fallback;
    let encoding = convert.Encoding.getByName(charset);
    t0 = encoding;
    return t0 == null ? fallback : t0;
  };
  utils.encodeMap = function encodeMap(data, handler, opts) {
    let encode = opts && 'encode' in opts ? opts.encode : true;
    let urlData = new core.StringBuffer.new("");
    let first = true;
    let leftBracket = dart.test(encode) ? "%5B" : "[";
    let rightBracket = dart.test(encode) ? "%5D" : "]";
    let encodeComponent = dart.test(encode) ? C1 || CT.C1 : dart.fn(e => e, dynamicTodynamic());
    function urlEncode(sub, path) {
      if (core.List.is(sub)) {
        for (let i = 0; i < dart.notNull(sub[$length]); i = i + 1) {
          urlEncode(sub[$_get](i), dart.str(path) + leftBracket + dart.str(core.Map.is(sub[$_get](i)) || core.List.is(sub[$_get](i)) ? i : "") + rightBracket);
        }
      } else if (core.Map.is(sub)) {
        sub[$forEach](dart.fn((k, v) => {
          if (path === "") {
            urlEncode(v, dart.str(encodeComponent(core.String._check(k))));
          } else {
            urlEncode(v, dart.str(path) + leftBracket + dart.str(encodeComponent(core.String._check(k))) + rightBracket);
          }
        }, dynamicAnddynamicToNull()));
      } else {
        let str = handler(path, sub);
        let isNotEmpty = str != null && dart.dtest(dart.dload(dart.dsend(str, 'trim', []), 'isNotEmpty'));
        if (!first && isNotEmpty) {
          urlData.write("&");
        }
        first = false;
        if (isNotEmpty) {
          urlData.write(str);
        }
      }
    }
    dart.fn(urlEncode, dynamicAndStringTovoid());
    urlEncode(data, "");
    return urlData.toString();
  };
  dart.defineLazy(utils, {
    /*utils._ASCII_ONLY*/get _ASCII_ONLY() {
      return core.RegExp.new("^[\\x00-\\x7F]+$");
    }
  });
  dart.trackLibraries("packages/hkbook/ThridLib/dio-3.0.8/lib/src/utils", {
    "package:hkbook/ThridLib/dio-3.0.8/lib/src/utils.dart": utils
  }, {
  }, '{"version":3,"sourceRoot":"","sources":["utils.dart"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;6CAUyB;AAAW,UAAA,AAAY,4BAAS,MAAM;EAAC;uDAKhC,QAAkB;AAC5C,oBAAY;AAE+C,IAD/D,AAAO,MAAD,QAAa,UAAL,IAAI,oBACA,UAAL,IAAI,uBAAmB,cAAM,AAAU,SAAD;AACnD,UAAO,AAAU,UAAD;EAClB;yDAKmC,SAAmB;;;AACpD,QAAI,AAAQ,OAAD,IAAI,MAAM,MAAO,SAAQ;AAChC,mBAAoB,2BAAU,OAAO;AACzC,SAAO,QAAQ;iBAAR,OAAY,QAAQ;EAC7B;uCAIiB,MAAuB;QAAe;AACjD,kBAAU,0BAAa;AACvB,gBAAQ;AACR,gCAAc,MAAM,IAAG,QAAQ;AAC/B,iCAAe,MAAM,IAAG,QAAQ;AAChC,oCAAkB,MAAM,kBAA8B,QAAC,KAAM,CAAC;AAClE,aAAK,UAAkB,KAAY;AACjC,UAAQ,aAAJ,GAAG;AACL,iBAAS,IAAI,GAAG,AAAE,CAAD,gBAAG,AAAI,GAAD,YAAS,IAAA,AAAC,CAAA;AAEmD,UADlF,AAAS,SAAA,CAAC,AAAG,GAAA,QAAC,CAAC,GACkE,SAA3E,IAAI,IAAC,WAAW,YAAU,AAAO,YAAd,AAAG,GAAA,QAAC,CAAC,MAAmB,aAAP,AAAG,GAAA,QAAC,CAAC,KAAa,CAAC,GAAG,MAAI,YAAY;;YAE7E,KAAQ,YAAJ,GAAG;AAOV,QANF,AAAI,GAAD,WAAS,SAAC,GAAG;AACd,cAAI,AAAK,IAAD,KAAI;AAC2B,YAArC,AAAS,SAAA,CAAC,CAAC,EAAyB,SAApB,AAAe,eAAA,oBAAC,CAAC;;AAEkC,YAAnE,AAAS,SAAA,CAAC,CAAC,EAAuD,SAAnD,IAAI,IAAC,WAAW,YAAE,AAAe,eAAA,oBAAC,CAAC,MAAG,YAAY;;;;AAIjE,kBAAM,AAAO,OAAA,CAAC,IAAI,EAAE,GAAG;AACvB,yBAAa,AAAY,GAAT,IAAI,mBAAmB,WAAP,WAAJ,GAAG;AACnC,aAAK,KAAK,IAAI,UAAU;AACJ,UAAlB,AAAQ,OAAD,OAAO;;AAEH,QAAb,QAAQ;AACR,YAAI,UAAU;AACM,UAAlB,AAAQ,OAAD,OAAO,GAAG;;;;;AAKJ,IAAnB,AAAS,SAAA,CAAC,IAAI,EAAE;AAChB,UAAO,AAAQ,QAAD;EAChB;;MA9Da,iBAAW;YAAG,iBAAO","file":"utils.ddc.js"}');
  // Exports:
  return {
    ThridLib__dio_3$460$468__lib__src__utils: utils
  };
});

//# sourceMappingURL=utils.ddc.js.map
